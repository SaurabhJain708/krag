# ============================================
# KRAG - Environment Variables Configuration
# ============================================
# Copy this file to .env and fill in your actual values
# cp .env.example .env

# ============================================
# Database Configuration (Supabase PostgreSQL)
# ============================================
# PostgreSQL password for supabase_admin user
POSTGRES_PASSWORD=your-secure-postgres-password-here

# JWT configuration for Supabase
JWT_SECRET=your-super-secret-jwt-token-key-change-this-in-production
JWT_EXP=3600

# Database connection URLs
# Use service name 'supabase-db' for internal Docker network communication
# Replace 'your-secure-postgres-password-here' with your actual POSTGRES_PASSWORD
DATABASE_URL=postgresql://supabase_admin:your-secure-postgres-password-here@supabase-db:5432/postgres
DIRECT_URL=postgresql://supabase_admin:your-secure-postgres-password-here@supabase-db:5432/postgres

# ============================================
# Supabase Configuration
# ============================================
# Supabase API URL (internal Docker network)
SUPABASE_URL=http://supabase-db:5432

# Supabase anon/public key (for client-side access)
SUPABASE_KEY=your-supabase-anon-key-here

# Supabase service role key (for server-side operations)
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key-here

# ============================================
# Redis Configuration
# ============================================
# Redis connection URL (use service name 'redis' for internal Docker network)
REDIS_URL=redis://redis:6379

# ============================================
# Modal Configuration
# ============================================
# Modal API credentials
MODAL_TOKEN_ID=your-modal-token-id-here
MODAL_TOKEN_SECRET=your-modal-token-secret-here

# ============================================
# Exa AI Configuration
# ============================================
# Exa API key for search functionality
EXA_API_KEY=your-exa-api-key-here

# ============================================
# Encryption Configuration
# ============================================
# Encryption key for sensitive data (must be 32 bytes for AES-256)
# Generate with: openssl rand -base64 32
ENCRYPTION_KEY=your-32-byte-encryption-key-here


# Key to store encryption key in local storage
ENCRYPTION_KEY_STORAGE = "encryption_key"

# ============================================
# Retrieval Worker Configuration
# ============================================
# Retrieval API endpoint (internal Docker network)
RETRIEVAL_API=http://retrieval-worker:8002

# ============================================
# Web App Configuration (Next.js)

# ============================================
# Node environment (default: production)
NODE_ENV=production

# Better Auth URL (relative path works in both Docker and local dev)
BETTER_AUTH_URL=/api/auth

# Public API URL for tRPC (relative path works in both Docker and local dev)
NEXT_PUBLIC_API_URL=/api/trpc

# ============================================
# Port Configuration (Optional - defaults shown)
# ============================================
# Supabase PostgreSQL port (default: 54322)
SUPABASE_DB_PORT=54322

# Redis port (default: 6379)
REDIS_PORT=6379


# Web App port (default: 3001)
WEB_PORT=3001